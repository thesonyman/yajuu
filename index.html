<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Yajuu by vivescere</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Yajuu</h1>
        <p class="header">An (almost) fully automated media downloader for animes, movies, tv shows, ...</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/vivescere/yajuu/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/vivescere/yajuu/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/vivescere/yajuu">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/vivescere">vivescere</a></p>


      </header>
      <section>
        <h1>
<a id="yajuu-an-automated-media-downloader" class="anchor" href="#yajuu-an-automated-media-downloader" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Yajuu: an automated media downloader</h1>

<p><a href="https://travis-ci.org/vivescere/yajuu"><img src="https://travis-ci.org/vivescere/yajuu.svg?branch=develop" alt="Build Status"></a>
<a href="https://coveralls.io/github/vivescere/yajuu?branch=develop"><img src="https://coveralls.io/repos/github/vivescere/yajuu/badge.svg?branch=develop" alt="Coverage Status"></a></p>

<p><strong>This software is in beta. It only supports the download of anime and movies for now. Music, and TV shows are to be added. No GUI is available for now, so you will have to use the CLI.</strong></p>

<p>Yajuu, which stands for wild beast in Japanese, is a software that can help you in the fastidious task of downloading files from the internet. It search on known websites for what you want, asks you which result is correct and then proceed to download the medias. By default, it uses <code>wget</code> to download files, and follow <a href="https://support.plex.tv/hc/en-us/categories/200028098-Media-Preparation">the plex recommendations</a> as of file naming conventions.</p>

<p>It's made to be simple to use, just see it in action:</p>

<p align="center">
    <a href="https://asciinema.org/a/ckiegvcdlwo0i5esm8e2kghzs">
        <img src="https://asciinema.org/a/ckiegvcdlwo0i5esm8e2kghzs.png" alt="Asciinema recording">
    </a>
</p>

<h2>
<a id="table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Table of contents</h2>

<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#supported-medias-and-websites">Supported medias and websites</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#development">Development</a></li>
<li><a href="#license">License</a></li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>To install from the master branch:</p>

<div class="highlight highlight-source-shell"><pre>pip install git+https://github.com/vivescere/yajuu.git</pre></div>

<p>Or, from the development branch:</p>

<div class="highlight highlight-source-shell"><pre>pip install git+https://github.com/vivescere/yajuu.git@develop</pre></div>

<h1>
<a id="supported-medias-and-websites" class="anchor" href="#supported-medias-and-websites" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Supported medias and websites</h1>

<p>Here is the complete list:</p>

<ul>
<li>Animes:

<ul>
<li><a href="http://www.animechiby.com">animechiby.com</a></li>
<li><a href="http://animehaven.org">animehaven.org</a></li>
<li><a href="http://gogoanime.io">gogoanime.io</a></li>
<li><a href="http://htvanime.com">htvanime.com</a></li>
<li><a href="http://www.masterani.me">masterani.me</a></li>
<li><a href="http://rawranime.tv">rawranime.tv</a></li>
<li><a href="http://moetube.net/">moetube.net</a></li>
</ul>
</li>
<li>Movies

<ul>
<li><a href="http://www.icefilms.info">icefilms.info</a></li>
</ul>
</li>
</ul>

<p>And here is the list of the media hosting sites from which the files can be extracted:</p>

<ul>
<li><a href="http://tiwi.kiwi/">tiwi.kiwi</a></li>
<li><a href="https://www.solidfiles.com/">solidfiles.com</a></li>
<li><a href="http://vidstream.io/">vidstream.io</a></li>
<li><a href="http://mp4upload.com/">mp4upload.com</a></li>
<li><a href="https://stream.moe/">stream.moe</a></li>
<li><a href="https://bakavideo.tv/">bakavideo.tv</a></li>
<li><a href="https://drive.google.com/drive/#">drive.google.com</a></li>
<li><a href="http://tusfiles.net/">tusfiles.net</a></li>
<li><a href="https://upload.af/">upload.af</a></li>
<li><a href="https://openload.co/">openload.co</a></li>
</ul>

<p>The list of the sites that are to be added next is available on the project <a href="https://trello.com/c/EhsCIloT/3-sites-to-support">trello board</a>.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>The only available mode is the download one, for now. A 'repair' mode is planned, which should be able to rename your files, check for invalid ones or with a too low quality, ...</p>

<p><em>Note:</em> The files that you download can be watermarked. The program will try to avoid that, but it can still happen.</p>

<p>You can also use the <em>--help</em> flag on the root or sub commands.</p>

<h3>
<a id="root-options" class="anchor" href="#root-options" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Root options</h3>

<p>The --verbosity option sets the logger versbosity and accept the following values: CRITICAL, ERROR, WARNING, INFO and ERROR.</p>

<p>The --media-type option sets the media type for ALL the passed medias, and accept the following values: anime.</p>

<h3>
<a id="download" class="anchor" href="#download" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Download</h3>

<p>Simple use the --media option of the download section:</p>

<div class="highlight highlight-source-shell"><pre>yajuu media download --media <span class="pl-s"><span class="pl-pds">'</span>Code geass season 1<span class="pl-pds">'</span></span></pre></div>

<p>You can pass it multiple times:</p>

<div class="highlight highlight-source-shell"><pre>yajuu media download --media <span class="pl-s"><span class="pl-pds">'</span>Code geass season 1<span class="pl-pds">'</span></span> --media <span class="pl-s"><span class="pl-pds">'</span>Berserk season 1<span class="pl-pds">'</span></span></pre></div>

<p>And request more than one season:</p>

<div class="highlight highlight-source-shell"><pre>yajuu media download --media <span class="pl-s"><span class="pl-pds">'</span>Psycho-Pass seasons 1,2<span class="pl-pds">'</span></span></pre></div>

<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>

<p>The config file is normally located at :</p>

<ul>
<li>
<em>~/.config/yajuu/config.yaml</em> on linux</li>
<li>
<em>~/Library/Application Support/yajuu/config.yaml</em> on Mac OS X</li>
<li>
<em>C:\Users&lt;user&gt;\AppData\Roaming\yajuu\config.yaml</em> on Windows</li>
</ul>

<h3>
<a id="media-quality" class="anchor" href="#media-quality" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Media quality</h3>

<p>In the <em>media</em> section, you can edit:</p>

<ul>
<li>
<em>minimum_quality</em>, by default set to 720.</li>
<li>
<em>maximum_quality</em>, by default set to 0, which means no limitations.</li>
</ul>

<h3>
<a id="download-paths" class="anchor" href="#download-paths" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Download paths</h3>

<p>The base path is set by default to <em>~/Videos</em>. The other parameters are all relatives to that base, and uses the plex naming recommendations by default.</p>

<h3>
<a id="plex-reloader" class="anchor" href="#plex-reloader" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Plex reloader</h3>

<p>By setting the enabled variable to true, you will enable the plex reloader, which triggers a library reload after each episode is downloaded.</p>

<p>You will need to configure the sections array, which is case sensitive.</p>

<h3>
<a id="custom-downloader" class="anchor" href="#custom-downloader" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom downloader</h3>

<p>Yajuu uses wget by default, but you can use virtually anything. Here are the variables (automatically quoted) that you can use while building the command :</p>

<ul>
<li>
<em>dirname</em>: the absolute path to the download folder</li>
<li>
<em>filename</em>: the name of the file</li>
<li>
<em>filepath</em>: the full path, including the dir and name to the file</li>
<li>
<em>url</em>: the url to the online file</li>
</ul>

<p>Here is an example for <a href="https://aria2.github.io/">aria2</a> :</p>

<div class="highlight highlight-source-yaml"><pre><span class="pl-s"><span class="pl-ent">misc:</span></span>
  <span class="pl-s"><span class="pl-ent">downloader:</span> <span class="pl-s"><span class="pl-pds">'</span>aria2c -x 5 -s 5 --summary-interval 0 --console-log-level error --download-result hide -d {dirname} -o {filename} {url}<span class="pl-pds">'</span></span></span></pre></div>

<h3>
<a id="thetvdb" class="anchor" href="#thetvdb" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thetvdb</h3>

<p>This project relies on <a href="http://thetvdb.com/">thetvdb</a> to find the correct medias names. A default key is included, but you can change it the default one does not work. You can also change the search language.</p>

<h2>
<a id="development" class="anchor" href="#development" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Development</h2>

<p>You are welcome to contribute to the project, any help will be appreciated! However, you must be using <a href="https://github.com/nvie/gitflow">git flow</a> to help.</p>

<h3>
<a id="to-create-an-extractor-add-a-website" class="anchor" href="#to-create-an-extractor-add-a-website" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>To create an extractor (add a website)</h3>

<p>Create a file in the extractors package, called '_extractor'. You should create it in the sub-package specific to the media type that the site supports.</p>

<p>Please inspire you from the existing files, to use for example threading. Each extractor should extends from a parent class. The mother class is called <em>Extractor</em>, but there are sub-classes that can be extended too, such as the <em>SeasonExtractor</em> class.</p>

<p>Usually, you will just have to create two methods: <em>search</em> and <em>extract</em>.</p>

<p>The search method should return an array of tuples. Each tuple should contain two variables, the first one being the string displayed to the user, the second an identifier that can be what you want (an url, a slug, ...).</p>

<p>The extract method parameters and return values can vary. In all case, the passed result variable is the one of the tuples returned by the search method. For example, using the season extractor you will also have access to the season variable. This method should be threaded, and use at most 16 threads. It should return a dict, at least for seasoned medias, which should have as key the episode number and as value a source array. Else, just return a source array. The source array is a simple list of tuples, each containing first the quality of the stream as an integer, and secondly the direct link to the source.</p>

<p>For example, you could write:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> .anime_extractor <span class="pl-k">import</span> AnimeExtractor

<span class="pl-k">class</span> <span class="pl-en">AnimeChibyExtractor</span>(<span class="pl-e">AnimeExtractor</span>):
    <span class="pl-k">def</span> <span class="pl-en">search</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
        <span class="pl-c"># Do some requests, etc...</span>
        <span class="pl-k">return</span> [(<span class="pl-s"><span class="pl-pds">'</span>First result<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>http://fake<span class="pl-pds">'</span></span>, <span class="pl-c1">...</span>)]

    <span class="pl-k">def</span> <span class="pl-en">extract</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">season</span>, <span class="pl-smi">result</span>):
        <span class="pl-c"># Do some other requests there.</span>
        <span class="pl-k">return</span> {
            <span class="pl-c1">1</span>: [
                (<span class="pl-c1">1080</span>, <span class="pl-s"><span class="pl-pds">'</span>http://fake<span class="pl-pds">'</span></span>),
                ..
            ],
            ..
        }</pre></div>

<p>Then, you will need to add your extractor to the corresponding orchestrator. For example, you added an anime site, edit the anime/anime_orchestrator.py file. All you have to do is to import your extractor, and add it to the <em>_get_default_extractors</em> method.</p>

<h3>
<a id="using-the-unshorten-helper" class="anchor" href="#using-the-unshorten-helper" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using the unshorten helper</h3>

<p>The unshorten file in the extractors module expose the <em>unshorten</em> method, which can be used to extract sources from well known sites, and also the <em>get_quality</em> method to get the quality of a stream. You can add websites to this file, this will be very appreciated.</p>

<p>To get the quality of a stream, you can use the get_quality method, which will return an integer.</p>

<p>The unshorten method checks if it knows the given website. If it doesn't, it returns None. Else, it extract the available sources, and return them as a <a href="###%20To%20create%20an%20extractor%20(add%20a%20website)">source array</a>.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>Yajuu uses the <a href="LICENSE">GNU</a> general public license.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
